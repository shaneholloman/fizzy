<div class="cards__expander-menu" data-controller="dialog" data-action="keydown.esc->dialog#close click@document->dialog#closeOnClickOutside">
  <button class="btn btn--circle txt-x-small borderless" data-action="click->dialog#open">
    <%= icon_tag "menu-dots-horizontal", class: "translucent" %>
    <span class="for-screen-reader">Column options</span>
  </button>
  <dialog class="popup panel flex-column gap fill-white shadow txt-small margin-block-double" data-dialog-target="dialog">
    <ul class="popup__list">
      <li class="popup__item">
        <button class="popup__btn btn" data-action="click->clicker#click">Rename column</button>
        <dialog class="popup panel flex-column gap fill-white shadow txt-small margin-block-double" data-dialog-target="dialog">
          <%= form_with model: [column.collection, column], data: { action: "turbo:submit-end->dialog#close" } do |form| %>
            <%= form.text_field :name, class: "input", placeholder: "Column name", value: column.name, required: true %>
            <%= form.submit "Rename column", class: "btn btn--link" %>
          <% end %>
        </dialog>
      </li>
      <li class="popup__item">
        <%= button_to "Delete column", collection_column_path(column.collection, column),
              method: :delete,
              class: "popup__btn btn",
                form_class: "display-contents",
              form: { data: { turbo_confirm: "Are you sure you want to delete this column? This will move the cards back to the stream." } } %>
      </li>
    </ul>
  </dialog>
</div>
